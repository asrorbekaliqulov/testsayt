{% load static %}
<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>{{ block.nomi }} - Test</title>
    <link rel="stylesheet" href="{% static 'css/test.css' %}">
</head>
<body>

<div class="wrapper">
    <div class="test-container">
        <!-- Timer display -->
        <div class="timer" id="timer">
            Vaqt: <span id="time-display">00:00</span>
        </div>

        <h1>{{ block.nomi }}</h1>
        
        <form method="post" action="{% url 'submit_test' block.id %}" id="test-form">
            {% csrf_token %}
            <input type="hidden" name="vaqt" id="vaqt-input" value="0">
            
            <div id="questions-container">
                {% for savol in savollar %}
                <div class="question">
                    <h3>{{ forloop.counter }}. {{ savol.matn }}</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="savol_{{ savol.id }}" value="A">
                            A) {{ savol.variant_a }}
                        </label>
                        <label class="option">
                            <input type="radio" name="savol_{{ savol.id }}" value="B">
                            B) {{ savol.variant_b }}
                        </label>
                        <label class="option">
                            <input type="radio" name="savol_{{ savol.id }}" value="C">
                            C) {{ savol.variant_c }}
                        </label>
                        <label class="option">
                            <input type="radio" name="savol_{{ savol.id }}" value="D">
                            D) {{ savol.variant_d }}
                        </label>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <button type="submit" id="submit-btn">Testni topshirish</button>
        </form>
    </div>
</div>

<!-- Timer JavaScript -->
<script>
let startTime = Date.now();
let timerInterval;

function updateTimer() {
    const elapsed = Math.floor((Date.now() - startTime) / 1000);
    const minutes = Math.floor(elapsed / 60);
    const seconds = elapsed % 60;
    
    document.getElementById('time-display').textContent = 
        `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    
    document.getElementById('vaqt-input').value = elapsed;
}

timerInterval = setInterval(updateTimer, 1000);

document.getElementById('test-form').addEventListener('submit', function() {
    clearInterval(timerInterval);
});
</script>

</body>
</html>
